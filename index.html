<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Contest</title>
  <style>
    body { font-family: system-ui, sans-serif; background:#0d1117; color:#e6edf3; margin:0; padding:20px }
    .container { max-width:900px; margin:auto }
    header { display:flex; justify-content:space-between; align-items:center; margin-bottom:20px }
    h1 { font-size:20px; margin:0 }
    .timer { font-weight:bold; font-size:16px; padding:6px 12px; border-radius:6px; background:#161b22 }
    .btn { background:#238636; color:#fff; border:none; padding:6px 12px; border-radius:6px; cursor:pointer; margin-left:6px }
    .btn:disabled { opacity:.6; cursor:not-allowed }
    .card { background:#161b22; border-radius:8px; padding:16px; }
    .problems { display:grid; gap:10px; margin-top:10px }
    .problem { background:#0d1117; border-radius:6px; padding:12px; display:flex; justify-content:space-between; align-items:center }
    .problem a { color:#58a6ff; text-decoration:none; font-weight:600; }
    .problem a:hover { text-decoration:underline }
    .mark-btn { background:#21262d; border:1px solid #30363d; color:#c9d1d9; border-radius:6px; padding:6px 10px; cursor:pointer }
    .mark-btn.done { background:#1f6feb33; border-color:#58a6ff; color:#58a6ff }
    .progress { height:10px; background:#21262d; border-radius:6px; overflow:hidden; margin-top:12px }
    .progress-bar { height:100%; background:#238636; width:0% }
    .topbar { display:flex; justify-content:space-between; align-items:center; margin-bottom:12px }
    .hidden-overlay { text-align:center; padding:40px; color:#8b949e; font-size:14px; background:#0d1117; border-radius:6px; }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Simple Contest — 2 hour fixed</h1>
      <div>
        <span id="timer" class="timer">Not started</span>
        <button id="startBtn" class="btn">Start Contest</button>
        <button id="resetBtn" class="btn">Reset</button>
      </div>
    </header>

    <div class="card">
      <div class="topbar">
        <div>Problems (edit in source)</div>
        <div><span id="solvedCount">Solved: 0/0</span> <button id="copyBtn" class="btn">Copy link</button></div>
      </div>
      <div id="lockedNotice" class="hidden-overlay">Problems will unlock after you press <strong>Start Contest</strong>.</div>
      <div class="problems" id="problemsList" style="display:none"></div>
      <div class="progress"><div id="progressBar" class="progress-bar"></div></div>
    </div>
  </div>

<script>
const PROBLEMS = [
  { name: "A - FizzBuzz", url: "https://codeforces.com/contest/2070/problem/A" },
  { name: "B - LCP", url: "https://leetcode.com/problems/longest-common-prefix/" },
  { name: "C - Circle Game", url: "https://codeforces.com/contest/1695/problem/B" },
  { name: "D - Non-zero segment", url: "https://codeforces.com/contest/1426/problem/D" }
];

const DURATION = 2*60*60*1000; 
const KEY_START="contest_start", KEY_MARKS="contest_marks";

let start = localStorage.getItem(KEY_START) ? parseInt(localStorage.getItem(KEY_START)) : null;
let marks = JSON.parse(localStorage.getItem(KEY_MARKS) || "{}");

const el = {
  timer:document.getElementById("timer"),
  startBtn:document.getElementById("startBtn"),
  resetBtn:document.getElementById("resetBtn"),
  list:document.getElementById("problemsList"),
  locked:document.getElementById("lockedNotice"),
  solved:document.getElementById("solvedCount"),
  progress:document.getElementById("progressBar"),
  copyBtn:document.getElementById("copyBtn")
};

function isStarted(){ return start!=null; }
function isEnded(){ return isStarted() && (Date.now()-start>=DURATION); }

function format(ms){ if(ms<=0)return"00:00:00"; let s=Math.floor(ms/1000)%60,m=Math.floor(ms/60000)%60,h=Math.floor(ms/3600000); return [h,m,s].map(x=>String(x).padStart(2,"0")).join(":"); }

function render(){
  el.list.innerHTML="";
  PROBLEMS.forEach((p,i)=>{
    const row=document.createElement("div"); row.className="problem";
    const link=document.createElement("a"); link.href=p.url; link.target="_blank"; link.rel="noopener"; link.textContent=p.name;
    const btn=document.createElement("button"); btn.className="mark-btn";
    if(marks[i]){ btn.classList.add("done"); btn.textContent="Done ✓"; }
    else btn.textContent="Mark as done";
    btn.onclick=()=>{ if(isEnded())return; if(marks[i])delete marks[i]; else marks[i]=true;
      localStorage.setItem(KEY_MARKS,JSON.stringify(marks)); render(); };
    if(isEnded()) btn.disabled=true;
    row.append(link,btn); el.list.append(row);
  });
  const solved=Object.keys(marks).length;
  el.solved.textContent=`Solved: ${solved}/${PROBLEMS.length}`;
  el.progress.style.width=(solved/PROBLEMS.length*100)+"%";
}

function tick(){
  if(!isStarted()){ el.timer.textContent="Not started"; return; }
  const rem=DURATION-(Date.now()-start);
  if(rem<=0){ el.timer.textContent="00:00:00 — Finished"; render(); }
  else el.timer.textContent=format(rem)+" remaining";
}

function startContest(){
  if(isStarted() && !isEnded() && !confirm("Contest already running. Restart?")) return;
  start=Date.now(); localStorage.setItem(KEY_START,start);
  el.locked.style.display="none"; el.list.style.display="grid"; render();
}

function reset(){
  localStorage.removeItem(KEY_START); localStorage.removeItem(KEY_MARKS);
  start=null; marks={};
  el.locked.style.display="block"; el.list.style.display="none"; el.list.innerHTML="";
  el.timer.textContent="Not started"; el.progress.style.width="0%"; el.solved.textContent=`Solved: 0/${PROBLEMS.length}`;
}

el.startBtn.onclick=startContest;
el.resetBtn.onclick=reset;
el.copyBtn.onclick=()=>{ navigator.clipboard.writeText(location.href); alert("Link copied!"); };

if(isStarted()){ el.locked.style.display="none"; el.list.style.display="grid"; render(); }
tick(); setInterval(tick,1000);
</script>
</body>
</html>

